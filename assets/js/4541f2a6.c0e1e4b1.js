"use strict";(globalThis.webpackChunkpages=globalThis.webpackChunkpages||[]).push([[5138],{2027:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"mockolate/create-mocks","title":"Create mocks","description":"You can create mocks for interfaces and classes. For classes without a default constructor, use","source":"@site/docs/mockolate/01-create-mocks.md","sourceDirName":"mockolate","slug":"/mockolate/create-mocks","permalink":"/docs/mockolate/create-mocks","draft":false,"unlisted":false,"editUrl":"https://github.com/aweXpect/aweXpect/tree/main/Docs/pages/docs/mockolate/01-create-mocks.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"mockolateSidebar","previous":{"title":"Mockolate","permalink":"/docs/mockolate/index"},"next":{"title":"Setup","permalink":"/docs/mockolate/setup"}}');var t=o(4848),r=o(8453);const c={},a="Create mocks",i={},l=[{value:"Customizing mock behavior",id:"customizing-mock-behavior",level:2},{value:"<code>MockBehavior</code> options",id:"mockbehavior-options",level:3},{value:"Using a factory for shared behavior",id:"using-a-factory-for-shared-behavior",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"create-mocks",children:"Create mocks"})}),"\n",(0,t.jsxs)(s.p,{children:["You can create mocks for interfaces and classes. For classes without a default constructor, use\n",(0,t.jsx)(s.code,{children:"BaseClass.WithConstructorParameters(\u2026)"})," to provide constructor arguments:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",children:'// Create a mock for an interface\nvar sut = Mock.Create<IChocolateDispenser>();\n\n// Create a mock for a class\nvar classMock = Mock.Create<MyChocolateDispenser>();\n\n// For classes without a default constructor:\nvar classWithArgsMock = Mock.Create<MyChocolateDispenserWithCtor>(\n    BaseClass.WithConstructorParameters("Dark", 42)\n);\n\n// Specify up to 8 additional interfaces for the mock:\nvar sut2 = Mock.Create<MyChocolateDispenser, ILemonadeDispenser>();\n'})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Notes:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Only the first generic type can be a class; additional types must be interfaces."}),"\n",(0,t.jsxs)(s.li,{children:["Sealed classes cannot be mocked and will throw a ",(0,t.jsx)(s.code,{children:"MockException"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"customizing-mock-behavior",children:"Customizing mock behavior"}),"\n",(0,t.jsxs)(s.p,{children:["You can control the default behavior of the mock by providing a ",(0,t.jsx)(s.code,{children:"MockBehavior"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",children:'var strictMock = Mock.Create<IChocolateDispenser>(new MockBehavior { ThrowWhenNotSetup = true });\n\n// For classes with constructor parameters and custom behavior:\nvar classMock = Mock.Create<MyChocolateDispenser>(\n    BaseClass.WithConstructorParameters("Dark", 42),\n    new MockBehavior { ThrowWhenNotSetup = true }\n);\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"mockbehavior-options",children:[(0,t.jsx)(s.code,{children:"MockBehavior"})," options"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"ThrowWhenNotSetup"})," (bool):","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["If ",(0,t.jsx)(s.code,{children:"false"})," (default), the mock will return a default value (see ",(0,t.jsx)(s.code,{children:"DefaultValue"}),")."]}),"\n",(0,t.jsxs)(s.li,{children:["If ",(0,t.jsx)(s.code,{children:"true"}),", the mock will throw an exception when a method or property is called without a setup."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"SkipBaseClass"})," (bool):","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["If ",(0,t.jsx)(s.code,{children:"false"})," (default), the mock will call the base class implementation and use its return values as default values, if no\nexplicit setup is defined."]}),"\n",(0,t.jsxs)(s.li,{children:["If ",(0,t.jsx)(s.code,{children:"true"}),", the mock will not call any base class implementations."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Initialize<T>(params Action<IMockSetup<T>>[] setups)"}),":","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Automatically initialize all mocks of type T with the given setups when they are created."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"DefaultValue"})," (IDefaultValueGenerator):","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Customizes how default values are generated for methods/properties that are not set up."}),"\n",(0,t.jsxs)(s.li,{children:["The default implementation provides sensible defaults for the most common use cases:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Empty collections for collection types (e.g., ",(0,t.jsx)(s.code,{children:"IEnumerable<T>"}),", ",(0,t.jsx)(s.code,{children:"List<T>"}),", etc.)"]}),"\n",(0,t.jsxs)(s.li,{children:["Empty string for ",(0,t.jsx)(s.code,{children:"string"})]}),"\n",(0,t.jsxs)(s.li,{children:["Completed tasks for ",(0,t.jsx)(s.code,{children:"Task"}),", ",(0,t.jsx)(s.code,{children:"Task<T>"}),", ",(0,t.jsx)(s.code,{children:"ValueTask"})," and ",(0,t.jsx)(s.code,{children:"ValueTask<T>"})]}),"\n",(0,t.jsx)(s.li,{children:"Tuples with recursively defaulted values"}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"null"})," for other reference types"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"using-a-factory-for-shared-behavior",children:"Using a factory for shared behavior"}),"\n",(0,t.jsxs)(s.p,{children:["Use ",(0,t.jsx)(s.code,{children:"Mock.Factory"})," to create multiple mocks with a shared behavior:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",children:"var behavior = new MockBehavior { ThrowWhenNotSetup = true };\nvar factory = new Mock.Factory(behavior);\n\nvar sut1 = factory.Create<IChocolateDispenser>();\nvar sut2 = factory.Create<ILemonadeDispenser>();\n"})}),"\n",(0,t.jsx)(s.p,{children:"Using a factory allows you to create multiple mocks with identical, centrally configured behavior. This is especially\nuseful when you need consistent mock setups across multiple tests or for different types."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,o)=>{o.d(s,{R:()=>c,x:()=>a});var n=o(6540);const t={},r=n.createContext(t);function c(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);