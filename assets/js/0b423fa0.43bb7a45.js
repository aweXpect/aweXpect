"use strict";(globalThis.webpackChunkpages=globalThis.webpackChunkpages||[]).push([[6459],{8453(e,t,n){n.d(t,{R:()=>o,x:()=>r});var c=n(6540);const s={},a=c.createContext(s);function o(e){const t=c.useContext(a);return c.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),c.createElement(a.Provider,{value:t},e.children)}},9832(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>i});const c=JSON.parse('{"id":"mockolate/special-types/delegates","title":"Delegates","description":"Mockolate supports mocking delegates including Action, Func, and custom delegates.","source":"@site/docs/mockolate/special-types/02-delegates.md","sourceDirName":"mockolate/special-types","slug":"/mockolate/special-types/delegates","permalink":"/docs/mockolate/special-types/delegates","draft":false,"unlisted":false,"editUrl":"https://github.com/aweXpect/aweXpect/tree/main/Docs/pages/docs/mockolate/special-types/02-delegates.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"mockolateSidebar","previous":{"title":"HttpClient","permalink":"/docs/mockolate/special-types/httpclient"},"next":{"title":"Analyzers","permalink":"/docs/mockolate/analyzers"}}');var s=n(4848),a=n(8453);const o={},r="Delegates",l={},i=[];function d(e){const t={a:"a",br:"br",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"delegates",children:"Delegates"})}),"\n",(0,s.jsxs)(t.p,{children:["Mockolate supports mocking delegates including ",(0,s.jsx)(t.code,{children:"Action"}),", ",(0,s.jsx)(t.code,{children:"Func<T>"}),", and custom delegates."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Setup"})}),"\n",(0,s.jsxs)(t.p,{children:["Use ",(0,s.jsx)(t.code,{children:"SetupMock.Delegate(...)"})," to configure delegate behavior."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'// Mock Action delegate\nAction myAction = Mock.Create<Action>();\nmyAction.SetupMock.Delegate().Do(() => Console.WriteLine("Action invoked!"));\n\n// Mock Func<T> delegate\nFunc<int> myFunc = Mock.Create<Func<int>>();\nmyFunc.SetupMock.Delegate().Returns(42);\n'})}),"\n",(0,s.jsx)(t.p,{children:"For custom delegates with parameters:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'// Define a custom delegate (typically declared at type level)\npublic delegate int Calculate(int x, string operation);\n\n// Create and setup the mock\nCalculate calculator = Mock.Create<Calculate>();\ncalculator.SetupMock.Delegate(It.IsAny<int>(), It.Is("add"))\n    .Returns((x, operation) => x + 10);\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Delegates with ",(0,s.jsx)(t.code,{children:"ref"})," and ",(0,s.jsx)(t.code,{children:"out"})," parameters are also supported:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"// Define a custom delegate (typically declared at type level)\npublic delegate void ProcessData(int input, ref int value, out int result);\n\n// Create and setup the mock\nProcessData processor = Mock.Create<ProcessData>();\nprocessor.SetupMock.Delegate(It.IsAny<int>(), It.IsRef<int>(v => v + 1), It.IsOut(() => 100));\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Use ",(0,s.jsx)(t.code,{children:".Do(...)"})," to run code when the delegate is invoked."]}),"\n",(0,s.jsxs)(t.li,{children:["Use ",(0,s.jsx)(t.code,{children:".Returns(...)"})," to specify the return value for ",(0,s.jsx)(t.code,{children:"Func<T>"})," delegates."]}),"\n",(0,s.jsxs)(t.li,{children:["Use ",(0,s.jsx)(t.code,{children:".Throws(...)"})," to specify an exception to throw."]}),"\n",(0,s.jsxs)(t.li,{children:["Use ",(0,s.jsx)(t.code,{children:".Returns(...)"})," and ",(0,s.jsx)(t.code,{children:".Throws(...)"})," repeatedly to define a sequence of behaviors."]}),"\n",(0,s.jsxs)(t.li,{children:["Full ",(0,s.jsx)(t.a,{href:"https://awexpect.com/docs/mockolate/setup#parameter-matching",children:"parameter matching"})," support for delegate\nparameters including ",(0,s.jsx)(t.code,{children:"ref"})," and ",(0,s.jsx)(t.code,{children:"out"})," parameters."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Verification"})}),"\n",(0,s.jsx)(t.p,{children:"You can verify that delegates were invoked with specific arguments:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"// Verify Action was invoked at least once\nAction myAction = Mock.Create<Action>();\nmyAction.Invoke();\nmyAction.VerifyMock.Invoked().AtLeastOnce();\n\n// Verify Func<T> was invoked exactly once\nFunc<int> myFunc = Mock.Create<Func<int>>();\n_ = myFunc();\nmyFunc.VerifyMock.Invoked().Once();\n"})}),"\n",(0,s.jsx)(t.p,{children:"For custom delegates with parameters:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'// Define a custom delegate (typically declared at type level)\npublic delegate int Calculate(int x, string operation);\n\n// Create, invoke, and verify the mock\nCalculate calculator = Mock.Create<Calculate>();\n_ = calculator(5, "add");\ncalculator.VerifyMock.Invoked(It.IsAny<int>(), It.Is("add")).Once();\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Delegates with ",(0,s.jsx)(t.code,{children:"ref"})," and ",(0,s.jsx)(t.code,{children:"out"})," parameters are also supported:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"// Define a custom delegate (typically declared at type level)\npublic delegate void ProcessData(int input, ref int value, out int result);\n\n// Create, invoke, and verify the mock\nProcessData processor = Mock.Create<ProcessData>();\nint val = 0;\nprocessor(1, ref val, out int res);\nprocessor.VerifyMock.Invoked(It.IsAny<int>(), It.IsRef<int>(), It.IsOut<int>()).Once();\n"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note:"}),(0,s.jsx)(t.br,{}),"\n","Delegate parameters also\nsupport ",(0,s.jsx)(t.a,{href:"https://awexpect.com/docs/mockolate/verify-interactions#argument-matchers",children:"argument matchers"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);